<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>단기 선교 팀원 유형 테스트</title>
    <meta name="description" content="선교지에서 나는 어떤 스타일일까? 4가지 신학적 관점으로 알아보세요.">
    <meta property="og:title" content="단기 선교 팀원 유형 테스트">
    <meta property="og:description" content="리먼, 라이트, 프랭키, 라잇하르트... 나의 선교관은 누구와 가장 비슷할까?">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- html2canvas (이미지 저장용) -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Pretendard', 'Noto Sans KR', 'sans-serif'],
                    },
                    colors: {
                        primary: { 50: '#f0f9ff', 100: '#e0f2fe', 500: '#0ea5e9', 600: '#0284c7', 900: '#0c4a6e' }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'slide-up': 'slideUp 0.5s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        slideUp: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } }
                    }
                }
            }
        }
    </script>
    
    <!-- Fonts -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
            min-height: 100vh;
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef } = React;

        // --- 아이콘 (SVG) ---
        const Icons = {
            ArrowLeft: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>,
            Plane: () => <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" className="text-sky-600"><path d="M2 12h20"/><path d="M13 2a9 9 0 0 1 9 9H2"/><path d="M13 22a9 9 0 0 0 9-9H2"/><path d="M22 17l-9-9-9 9"/><path d="M13 12v10"/></svg>,
            Refresh: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 21h5v-5"/></svg>,
            Quote: () => <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor" className="text-sky-200"><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H6c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-2c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/></svg>,
            Share: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>,
            Download: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        };

        // --- 문항 데이터 (신학적 검토 완료 버전) ---
        const questions = [
            {
                id: 1,
                question: "선교 출발 전, 개인 가방에 가장 신경 써서 챙길 물건은?",
                options: [
                    { type: 'A', text: "전도지와 현지어 성경 (교회의 핵심 임무는 말씀을 전하는 것이니까!)" }, // 리먼: 말씀 중심, 교회의 좁은 임무
                    { type: 'B', text: "구급약과 구호 물품 (복음은 영혼뿐 아니라 육체의 필요도 채우는 거니까!)" }, // 라이트: 총체적 선교
                    { type: 'C', text: "현지 문화/역사 책 (우리의 방식이 아닌 그들의 맥락을 이해해야 하니까!)" }, // 프랭키: 상황화, 경청
                    { type: 'D', text: "개인 경건 노트와 성찬기 (거룩한 예배가 선교의 시작이자 끝이니까!)" } // 라잇하르트: 예배/성례 중심
                ]
            },
            {
                id: 2,
                question: "현지에 도착하자마자 우리 팀이 가장 먼저 해야 할 일은?",
                options: [
                    { type: 'A', text: "거리로 나가서 사람들에게 복음을 선포하고 회개를 촉구한다." }, // 리먼: 선포(Proclamation) 우선
                    { type: 'B', text: "마을을 둘러보며 우리가 도울 수 있는 환경적, 사회적 필요를 찾는다." }, // 라이트: 창조세계/사회 돌봄
                    { type: 'C', text: "시장에서 현지인들과 어울리며 그들의 삶과 언어 속에 자연스럽게 녹아든다." }, // 프랭키: 성육신적 접근
                    { type: 'D', text: "숙소에서 함께 떡을 떼며(성찬), 우리가 한 몸 된 거룩한 공동체임을 확인한다." } // 라잇하르트: 교회됨(Being) 확인
                ]
            },
            {
                id: 3,
                question: "현지인들을 위한 '문화 공연'을 준비한다면?",
                options: [
                    { type: 'A', text: "공연은 수단일 뿐, 마지막엔 반드시 복음 메시지를 전하고 결신자를 얻어야 한다." }, // 리먼: 영혼 구원 목적
                    { type: 'B', text: "수익금으로 현지 병원이나 학교를 돕는 자선 행사로 기획하여 하나님의 정의를 실천한다." }, // 라이트: 사회적 실천
                    { type: 'C', text: "일방적인 공연보다는, 현지 전통 노래도 함께 배우며 서로의 문화를 교류하는 장을 만든다." }, // 프랭키: 상호성, 문화 존중
                    { type: 'D', text: "우리가 서로 사랑하고 하나 된 모습을 보여주어, 세상과는 다른 '대조 사회'를 드러낸다." } // 라잇하르트: 대조 사회(Contrast Society)
                ]
            },
            {
                id: 4,
                question: "선교지에서 타종교 사원을 방문하게 되었다. 당신의 생각은?",
                options: [
                    { type: 'A', text: "명백한 우상 숭배의 현장이다. 영적 전쟁을 선포하며 그들이 회개하도록 기도한다." }, // 리먼: 배타적 진리, 회개
                    { type: 'B', text: "이 종교가 이 사회의 빈곤이나 불평등 구조에 어떤 영향을 미쳤는지 분석해본다." }, // 라이트: 사회 구조적 관점
                    { type: 'C', text: "이들의 종교심을 존중한다. 기독교 복음이 이들의 문화 안에서 어떻게 번역될지 고민한다." }, // 프랭키: 번역 가능성, 존중
                    { type: 'D', text: "거짓된 제사가 아닌, 참된 예배(성찬)만이 세상을 치유할 유일한 대안임을 재확인한다." } // 라잇하르트: 참된 제의(Liturgy)
                ]
            },
            {
                id: 5,
                question: "현지 청년에게 '예수님을 믿지 않으면 어떻게 되나요?'라는 질문을 받았다면?",
                options: [
                    { type: 'A', text: "죄에 대한 하나님의 진노와 영원한 심판이 있음을 경고하며 긴급하게 회개를 촉구한다." }, // 리먼: 심판의 실재, 긴급성
                    { type: 'B', text: "하나님은 악을 심판하여 망가진 세상을 바로잡으실 것이다. 그 회복에 동참하자고 권한다." }, // 라이트: 악의 제거와 회복
                    { type: 'C', text: "하나님은 악을 끝내시지만, 영원한 고통보다는 사랑으로 회복하시는 분임을 강조한다." }, // 프랭키: 조건적 불멸설 뉘앙스
                    { type: 'D', text: "세상의 방식대로 살면 이미 심판 아래 있는 것이다. 참된 생명의 공동체로 들어오라고 초청한다." } // 라잇하르트: 현재적 심판, 교회로의 초대
                ]
            },
            {
                id: 6,
                question: "선교 기간 중, 팀원 간에 심각한 갈등이 생겼다. 최우선 해결책은?",
                options: [
                    { type: 'A', text: "사탄의 방해다. 선교(전도)라는 대의를 위해 개인 감정은 접어두고 사역에 집중하자." }, // 리먼: 임무 중심
                    { type: 'B', text: "혹시 불공정한 역할 분담이나 구조적인 문제는 없었는지 살피고 시스템을 개선한다." }, // 라이트: 정의와 공정
                    { type: 'C', text: "서로 다른 배경과 성향을 이해하는 대화의 시간을 갖고, 다양성을 포용하려 노력한다." }, // 프랭키: 다양성 존중
                    { type: 'D', text: "모든 사역을 멈추고 함께 성찬을 떼며, 그리스도 안에서 한 몸임을 회복하는 게 먼저다." } // 라잇하르트: 성례적 연합
                ]
            },
            {
                id: 7,
                question: "현지 교회가 전통 악기로 시끄럽게, 우리와는 전혀 다른 방식으로 예배드린다.",
                options: [
                    { type: 'A', text: "조금 우려된다. 성경적 질서와 거룩함이 유지되도록 바른 예배 모범을 가르쳐주고 싶다." }, // 리먼: 규범적 예배
                    { type: 'B', text: "형식보다는 그들의 신앙이 지역 사회에서 정의와 사랑을 실천하는 동력이 되는지가 중요하다." }, // 라이트: 삶의 열매
                    { type: 'C', text: "아름답다! 서구식 예배를 흉내 내지 않고 그들의 고유한 문화로 하나님을 찬양하는 것이 옳다." }, // 프랭키: 문화적 고유성 긍정
                    { type: 'D', text: "형식은 달라도 세례와 성찬을 통해 우리가 세계 교회와 하나 됨을 느끼는 것이 핵심이다." } // 라잇하르트: 보편적 연합
                ]
            },
            {
                id: 8,
                question: "귀국 전, 남은 예산을 가장 의미 있게 사용하는 방법은?",
                options: [
                    { type: 'A', text: "현지어 성경 번역 및 보급 사역이나 전도지 제작 비용으로 헌금한다." }, // 리먼: 말씀 사역
                    { type: 'B', text: "마을의 오염된 우물을 파주거나, 굶주린 아이들을 위한 급식 사역에 지원한다." }, // 라이트: 창조세계/사회 돌봄
                    { type: 'C', text: "현지 신학자들이 자신들의 언어로 신학을 연구할 수 있도록 도서나 연구비를 지원한다." }, // 프랭키: 현지 신학 발전
                    { type: 'D', text: "현지 성도들과 마지막으로 성대한 애찬식(식사)을 열어 천국 잔치를 미리 맛본다." } // 라잇하르트: 종말론적 잔치
                ]
            },
            {
                id: 9,
                question: "이번 단기 선교가 '성공적'이었다고 평가하는 기준은?",
                options: [
                    { type: 'A', text: "복음을 듣고 회심하여 세례를 받기로 결단한 사람이 몇 명인가?" }, // 리먼: 회심과 숫자
                    { type: 'B', text: "우리의 섬김으로 현지인들의 삶의 질이 얼마나 개선되었는가?" }, // 라이트: 총체적 변화
                    { type: 'C', text: "우리가 그들의 문화를 얼마나 이해했고, 그들과 친구가 되었는가?" }, // 프랭키: 관계와 이해
                    { type: 'D', text: "팀원들과 현지 교회가 그리스도 안에서 얼마나 깊이 하나 되었는가?" } // 라잇하르트: 연합과 교회됨
                ]
            },
            {
                id: 10,
                question: "한국에 돌아온 후, 당신의 삶은 어떻게 변할까?",
                options: [
                    { type: 'A', text: "내 주변의 믿지 않는 친구들에게 더 담대하게 복음을 전해야겠다." }, // 리먼: 전도 열정
                    { type: 'B', text: "환경 문제나 소외된 이웃에게 더 관심을 갖고 사회적 책임을 다해야겠다." }, // 라이트: 시민적 책임
                    { type: 'C', text: "다문화 가정이나 외국인 노동자들에 대한 편견을 버리고 다가가야겠다." }, // 프랭키: 타자 수용
                    { type: 'D', text: "우리 교회 공동체를 더 사랑하고, 공예배와 성찬을 더 귀하게 여겨야겠다." } // 라잇하르트: 교회 중심성
                ]
            }
        ];

        // --- 상세한 결과 데이터 ---
        const results = {
            'A': {
                type: "복음의 특공대원",
                engType: "Soteriological Mission (J. Leeman)",
                quote: "가장 급한 것은 생명을 구하는 일! 복음 없이는 아무것도 아닙니다.",
                desc: (
                    <>
                        <p>당신은 선교의 핵심을 <strong>'영혼 구원'</strong>에 두는 <strong>[구원론적 선교]</strong> 유형입니다. 조나단 리먼처럼, 당신은 교회의 본질이 희석되는 것을 경계합니다. 사회 봉사도 좋지만, <strong>'예수 그리스도의 복음 선포'와 '죄 사함'</strong>이라는 교회 고유의 임무를 놓쳐서는 안 된다고 믿습니다.</p>
                        <p>당신은 <strong>교회(조직)</strong>가 해야 할 일과 <strong>성도(개인)</strong>가 세상에서 해야 할 일을 명확히 구분합니다. 교회의 공식적인 에너지는 말씀 선포와 제자 삼기에 집중되어야 하며, 이것이 가장 시급한 구조 활동이라고 생각합니다.</p>
                        <p>팀 내에서 <strong>영적 기강</strong>을 잡고, 사역의 방향이 딴 길로 새지 않도록 돕는 역할을 합니다. 당신에게 선교란, 멸망해가는 세상에서 한 영혼이라도 더 건져내는 긴박한 <strong>구조 작전</strong>입니다.</p>
                    </>
                ),
                keywords: ["#영혼구원", "#말씀중심", "#제자삼기", "#천국대사관", "#거룩함"],
                challenge: "개인의 구원에 집중한 나머지, 하나님께서 만드신 창조 세계의 회복이나 이웃의 현실적인 고통(가난, 불의)에 대해 교회가 너무 침묵하고 있지는 않은지 돌아볼 필요가 있습니다."
            },
            'B': {
                type: "세상의 치유자",
                engType: "Participatory Mission (C. J. H. Wright)",
                quote: "복음은 말로만 전하는 게 아니에요. 삶으로 사랑을 보여줘야죠.",
                desc: (
                    <>
                        <p>당신은 선교를 <strong>'하나님의 세상 회복'</strong>에 동참하는 것으로 보는 <strong>[참여적 선교]</strong> 유형입니다. 크리스토퍼 라이트처럼, 당신은 선교를 성경 전체의 거대 서사(창조-타락-구속-새창조) 속에서 이해하며, 복음 전도와 사회적 책임(정의, 환경)을 분리할 수 없는 <strong>'두 날개'</strong>로 여깁니다.</p>
                        <p>당신은 <strong>'성속 이원론'</strong>을 거부합니다. 선교지뿐만 아니라 당신의 직장, 학교, 가정도 하나님의 통치가 임해야 할 선교지입니다. 말로만 하는 전도보다는 땀 흘려 섬기고, 아픈 곳을 치유하며 하나님의 사랑을 보여주는 것을 중요하게 생각합니다.</p>
                        <p>팀 내에서 <strong>궂은일</strong>을 도맡아 하며, 현지인들의 필요를 가장 먼저 파악하는 봉사자입니다. 당신에게 선교란, 망가진 세상을 고치시는 하나님의 역사에 나의 손발을 보태는 것입니다.</p>
                    </>
                ),
                keywords: ["#총체적선교", "#사회정의", "#창조세계회복", "#통전적복음", "#행동하는믿음"],
                challenge: "\"모든 것이 선교라면, 결국 아무것도 선교가 아니다\"라는 말을 경계해야 합니다. 사회 변혁에 힘쓰느라 정작 십자가 복음과 회개를 선포하는 일이 약화되지는 않았는지 점검해야 합니다."
            },
            'C': {
                type: "문화의 통역사",
                engType: "Contextual Mission (J. R. Franke)",
                quote: "그들의 친구가 되어야 합니다. 복음은 그들의 언어로 전해져야 해요.",
                desc: (
                    <>
                        <p>당신은 선교지의 문화를 깊이 존중하고, 그들의 눈높이에서 복음을 전하려는 <strong>[상황적 선교]</strong> 유형입니다. 존 프랭키처럼, 당신은 복음이 고정된 화석이 아니라 각 문화 속에서 역동적으로 <strong>'번역'</strong>되어야 한다고 믿습니다. 서구 중심적이고 일방적인 선교 방식을 지양하고 <strong>'경청'과 '존중'</strong>을 우선합니다.</p>
                        <p>당신은 <strong>'성령의 자유로운 역사'</strong>를 신뢰합니다. 획일적인 통일성보다는 서로 다름을 인정하는 <strong>'다양성 속의 연합'</strong>을 꿈꿉니다. 경직된 교리를 강요하기보다, 대화와 관계를 통해 복음의 다리를 놓는 평화의 사도가 되기를 원합니다.</p>
                        <p>팀 내에서 현지인들과 가장 빨리 <strong>친구</strong>가 되며, 문화적 충돌을 유연하게 중재합니다. 당신에게 선교란, 낯선 타인에게 다가가 마음을 열고 그들의 언어로 복음을 건네주는 것입니다.</p>
                    </>
                ),
                keywords: ["#문화존중", "#상황화", "#다양성", "#성령의인도", "#성육신"],
                challenge: "문화를 존중하는 것은 좋지만, 자칫 복음의 절대적 진리마저 상대화될 위험(혼합주의)은 없을까요? 때로는 문화의 죄악 된 부분에 대해 과감히 '아니오'라고 말할 용기도 필요합니다."
            },
            'D': {
                type: "거룩한 공동체",
                engType: "Sacramental Mission (P. J. Leithart)",
                quote: "우리가 서로 사랑하는 모습, 그 자체가 세상에 전하는 메시지입니다.",
                desc: (
                    <>
                        <p>당신은 무엇을 '하는(Doing)' 것보다 어떤 존재가 '되는(Being)' 것을 중시하는 <strong>[성례전적 선교]</strong> 유형입니다. 피터 라잇하르트처럼, 당신은 교회가 세상을 억지로 바꾸려 하기보다, 교회 안에서부터 세상과는 완전히 다른 <strong>'대조 사회(Contrast Society)'</strong>를 이루어 보여주는 것이 가장 강력한 선교라고 믿습니다.</p>
                        <p>당신에게 <strong>예배와 성례전(세례, 성찬)</strong>은 단순한 의식이 아니라, 인종과 계급을 넘어선 새로운 인류를 만드는 정치적 행위입니다. 거창한 프로젝트보다 우리 팀이 먼저 거룩하게 예배하고 하나 될 때, 세상은 충격을 받고 하나님께 돌아올 것입니다.</p>
                        <p>팀 내에서 <strong>예배와 교제</strong>를 주도하며, 팀원들의 영적 연합을 돕습니다. 당신에게 선교란, 삭막한 세상 한복판에 하나님 나라의 모델 하우스(교회)를 세워 보여주는 것입니다.</p>
                    </>
                ),
                keywords: ["#교회됨", "#성례전", "#대조사회", "#공동체", "#거룩한삶"],
                challenge: "교회 내부의 거룩함에 집중하느라, 담장 밖의 잃어버린 영혼들에게 나아가 복음을 전하는 '가는 선교'의 야성을 잃어버릴 수도 있습니다. 우리끼리의 '거룩한 게토'가 되지 않도록 주의해야 합니다."
            }
        };

        // --- 컴포넌트 ---

        function App() {
            const [step, setStep] = useState('welcome');
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [answers, setAnswers] = useState({});
            const [finalResult, setFinalResult] = useState(null);
            const captureRef = useRef(null);

            const handleStart = () => setStep('quiz');

            const handleAnswer = (type) => {
                const newAnswers = { ...answers, [currentQuestion]: type };
                setAnswers(newAnswers);
                setTimeout(() => {
                    if (currentQuestion < questions.length - 1) {
                        setCurrentQuestion(currentQuestion + 1);
                    } else {
                        calculateResult(newAnswers);
                    }
                }, 250);
            };

            const handleBack = () => {
                if (currentQuestion > 0) {
                    setCurrentQuestion(currentQuestion - 1);
                } else {
                    setStep('welcome');
                }
            };

            const calculateResult = (finalAnswers) => {
                const scores = { A: 0, B: 0, C: 0, D: 0 };
                Object.values(finalAnswers).forEach(type => scores[type]++);
                const maxScore = Math.max(...Object.values(scores));
                const resultType = Object.keys(scores).find(key => scores[key] === maxScore);
                
                const total = Object.values(scores).reduce((a, b) => a + b, 0);
                const percentages = {
                    A: Math.round((scores.A / total) * 100),
                    B: Math.round((scores.B / total) * 100),
                    C: Math.round((scores.C / total) * 100),
                    D: Math.round((scores.D / total) * 100)
                };

                setFinalResult({ type: resultType, scores: percentages });
                setStep('loading');
                setTimeout(() => setStep('result'), 2000);
            };

            const handleRetest = () => {
                setAnswers({});
                setCurrentQuestion(0);
                setFinalResult(null);
                setStep('welcome');
            };

            const handleCapture = async () => {
                if (captureRef.current) {
                    try {
                        const canvas = await html2canvas(captureRef.current, {
                            scale: 2,
                            backgroundColor: '#ffffff',
                            useCORS: true
                        });
                        const image = canvas.toDataURL("image/png");
                        const link = document.createElement("a");
                        link.href = image;
                        link.download = "선교유형_결과.png";
                        link.click();
                    } catch (err) {
                        alert("이미지 저장 중 오류가 발생했습니다.");
                    }
                }
            };

            const handleShare = async () => {
                const shareData = {
                    title: '단기 선교 팀원 유형 테스트',
                    text: '나는 선교지에서 어떤 스타일일까? 결과를 확인해보세요!',
                    url: window.location.href
                };
                if (navigator.share) {
                    try { await navigator.share(shareData); } catch (err) { console.log(err); }
                } else {
                    try { await navigator.clipboard.writeText(window.location.href); alert("링크가 복사되었습니다!"); } catch (err) { alert("복사 실패"); }
                }
            };

            return (
                <div className="min-h-screen flex items-center justify-center p-4 py-8">
                    <div className="max-w-md w-full glass-panel rounded-3xl shadow-2xl shadow-sky-900/10 overflow-hidden min-h-[640px] flex flex-col relative transition-all duration-500">
                        
                        {step === 'quiz' && (
                            <div className="absolute top-0 left-0 w-full h-1.5 bg-gray-100 z-10">
                                <div className="h-full bg-gradient-to-r from-sky-400 to-blue-600 transition-all duration-500 ease-out" style={{ width: `${((currentQuestion + 1) / questions.length) * 100}%` }}></div>
                            </div>
                        )}

                        {step === 'welcome' && (
                            <div className="flex-1 flex flex-col items-center justify-center p-8 text-center animate-fade-in relative overflow-hidden">
                                <div className="absolute top-[-50px] right-[-50px] w-40 h-40 bg-sky-200 rounded-full blur-3xl opacity-60"></div>
                                <div className="absolute bottom-[-50px] left-[-50px] w-40 h-40 bg-blue-200 rounded-full blur-3xl opacity-60"></div>

                                <div className="mb-8 p-6 bg-white rounded-full shadow-lg shadow-sky-200/50 animate-[bounce_3s_infinite]">
                                    <Icons.Plane />
                                </div>
                                <h1 className="text-3xl font-extrabold text-gray-900 mb-8 tracking-tight">단기 선교<br/>팀원 유형 테스트</h1>
                                
                                <div className="text-gray-600 mb-12 leading-relaxed space-y-2 text-sm">
                                    <p>선교지에서 나는 어떤 모습일까?</p>
                                    <p>10가지 질문을 통해</p>
                                    <p>나의 <strong>'선교 스타일'</strong>을 확인해보세요!</p>
                                </div>
                                
                                <button onClick={handleStart} className="w-full bg-gradient-to-r from-sky-500 to-blue-600 hover:from-sky-600 hover:to-blue-700 text-white font-bold py-4 px-8 rounded-2xl transition duration-300 transform hover:scale-[1.02] shadow-lg flex items-center justify-center gap-2">
                                    <span>비행기 탑승하기 ✈️</span>
                                </button>
                            </div>
                        )}

                        {step === 'quiz' && (
                            <div className="flex-1 flex flex-col p-0 animate-fade-in">
                                <div className="px-6 pt-8 pb-4 flex items-center justify-between">
                                    <button onClick={handleBack} className="p-2 -ml-2 text-gray-400 hover:text-gray-800 hover:bg-gray-100 rounded-full transition-colors"><Icons.ArrowLeft /></button>
                                    <span className="text-xs font-semibold text-gray-400 tracking-widest">Q {currentQuestion + 1} / {questions.length}</span>
                                </div>
                                <div className="flex-1 px-6 pb-8 flex flex-col justify-center">
                                    <h2 className="text-xl font-bold text-gray-800 mb-8 leading-snug break-keep animate-slide-up">{questions[currentQuestion].question}</h2>
                                    <div className="space-y-3">
                                        {questions[currentQuestion].options.map((opt, idx) => {
                                            const isSelected = answers[currentQuestion] === opt.type;
                                            return (
                                                <button key={opt.type} onClick={() => handleAnswer(opt.type)} className={`w-full text-left p-5 rounded-2xl border transition-all duration-200 group relative overflow-hidden animate-slide-up ${isSelected ? 'border-sky-500 bg-sky-50 ring-1 ring-sky-500 shadow-md' : 'border-gray-200 hover:border-sky-300 hover:bg-sky-50 hover:shadow-md bg-white'}`} style={{ animationDelay: `${idx * 50}ms` }}>
                                                    <div className="flex items-start gap-4 relative z-10">
                                                        <span className={`flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold transition-colors mt-0.5 ${isSelected ? 'bg-sky-600 text-white' : 'bg-gray-100 text-gray-500 group-hover:bg-sky-100 group-hover:text-sky-600'}`}>{opt.type}</span>
                                                        <span className={`text-[15px] font-medium leading-relaxed transition-colors ${isSelected ? 'text-gray-900' : 'text-gray-600 group-hover:text-gray-900'}`}>{opt.text}</span>
                                                    </div>
                                                </button>
                                            );
                                        })}
                                    </div>
                                </div>
                            </div>
                        )}

                        {step === 'loading' && (
                            <div className="flex-1 flex flex-col items-center justify-center p-8 animate-fade-in bg-white/50 backdrop-blur-sm">
                                <div className="w-16 h-16 border-4 border-sky-100 border-t-sky-600 rounded-full animate-spin"></div>
                                <p className="mt-8 text-gray-800 font-semibold text-lg animate-pulse">유형 분석 중...</p>
                            </div>
                        )}

                        {step === 'result' && finalResult && (
                            <div className="flex-1 flex flex-col p-0 animate-slide-up overflow-y-auto max-h-[700px] scrollbar-hide bg-white">
                                <div ref={captureRef} className="bg-white">
                                    <div className="relative bg-gradient-to-b from-sky-50 via-white to-white p-8 pb-6 text-center">
                                        <div className="relative z-10">
                                            <div className="inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-white border border-sky-100 shadow-sm mb-6">
                                                <span className="w-2 h-2 rounded-full bg-sky-500 animate-pulse"></span>
                                                <span className="text-xs font-bold text-sky-600 tracking-wider">MY MISSION STYLE</span>
                                            </div>
                                            <h2 className="text-2xl font-extrabold text-gray-900 mb-1 break-keep leading-tight">{results[finalResult.type].type}</h2>
                                            <p className="text-xs text-gray-400 font-medium mb-6 uppercase tracking-wider">{results[finalResult.type].engType}</p>
                                            
                                            <div className="relative p-8 bg-sky-50 rounded-3xl border border-sky-100 mx-2">
                                                <div className="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-sky-600 text-white p-2 rounded-full shadow-lg"><Icons.Quote /></div>
                                                <p className="text-lg font-serif font-medium text-gray-800 relative z-10 break-keep pt-2 italic">"{results[finalResult.type].quote}"</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="px-8 py-2 pb-6 space-y-8 bg-white result-content">
                                        <div>
                                            <h3 className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2">📊 성향 분석표</h3>
                                            <div className="space-y-3">
                                                {[
                                                    { type: 'A', label: '복음', color: 'bg-red-400' },
                                                    { type: 'B', label: '참여', color: 'bg-green-400' },
                                                    { type: 'C', label: '상황', color: 'bg-yellow-400' },
                                                    { type: 'D', label: '성례', color: 'bg-purple-400' }
                                                ].map((item) => (
                                                    <div key={item.type} className="flex items-center gap-3 text-xs">
                                                        <span className="w-8 font-bold text-gray-600">{item.label}</span>
                                                        <div className="flex-1 h-2 bg-gray-100 rounded-full overflow-hidden">
                                                            <div className={`h-full ${item.color} rounded-full`} style={{ width: `${finalResult.scores[item.type]}%` }}></div>
                                                        </div>
                                                        <span className="w-8 text-right font-medium text-gray-500">{finalResult.scores[item.type]}%</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>

                                        <div className="prose prose-sky max-w-none">
                                            <h3 className="text-sm font-bold text-gray-900 uppercase tracking-wider mb-3 flex items-center gap-2"><span className="w-1 h-4 bg-sky-600 rounded-full"></span>유형 설명</h3>
                                            <div className="text-gray-600 text-[15px] text-justify font-normal space-y-4">{results[finalResult.type].desc}</div>
                                        </div>

                                        <div>
                                            <div className="flex flex-wrap gap-2">
                                                {results[finalResult.type].keywords.map((kw, i) => (
                                                    <span key={i} className="bg-gray-50 text-gray-600 px-3 py-1.5 rounded-lg text-xs font-semibold border border-gray-100">{kw}</span>
                                                ))}
                                            </div>
                                        </div>

                                        <div className="bg-orange-50 p-6 rounded-2xl border border-orange-100">
                                            <h3 className="text-sm font-bold text-orange-700 mb-3 flex items-center gap-2"><span className="text-lg">💡</span> 주의할 점</h3>
                                            <div className="text-gray-700 text-sm text-justify space-y-3">{results[finalResult.type].challenge}</div>
                                        </div>
                                    </div>
                                </div>

                                <div className="px-8 pb-10 bg-white">
                                    <div className="flex gap-3 mb-6">
                                        <button onClick={handleCapture} className="flex-1 bg-white border border-gray-200 text-gray-700 font-bold py-3 px-4 rounded-xl shadow-sm hover:bg-gray-50 transition flex items-center justify-center gap-2 text-sm"><Icons.Download /> 저장</button>
                                        <button onClick={handleShare} className="flex-1 bg-sky-600 text-white font-bold py-3 px-4 rounded-xl shadow-md hover:bg-sky-700 transition flex items-center justify-center gap-2 text-sm"><Icons.Share /> 공유</button>
                                    </div>
                                    <button onClick={handleRetest} className="w-full bg-gray-900 hover:bg-black text-white font-bold py-4 px-8 rounded-2xl transition duration-300 shadow-xl shadow-gray-200 flex items-center justify-center gap-2 group mb-10"><Icons.Refresh /><span>테스트 다시하기</span></button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>